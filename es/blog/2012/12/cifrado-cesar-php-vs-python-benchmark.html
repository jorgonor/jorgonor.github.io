<!DOCTYPE html>
<html lang="es">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

  
  <link rel="stylesheet" href="/css/main.css" media="screen,projection" />
  

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon.png" />
<link rel="shortcut icon" href="/favicon.ico" />
  
  
  <link rel="alternate" type="application/rss+xml" title="Jorgonor" href="https://jorgonor.com/es/feed.xml" />
  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Cifrado César (PHP vs Python) | Jorgonor</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Cifrado César (PHP vs Python)" />
<meta name="author" content="jorgonor" />
<meta property="og:locale" content="es" />
<meta name="description" content="Vuelvo con un pequeño problema al que le he estado dando vueltas, el del cifrado césar. No sé vosotros pero almenos a mi en seguridad informática fue el algoritmo con el que nos enseñaron qué era el cifrado." />
<meta property="og:description" content="Vuelvo con un pequeño problema al que le he estado dando vueltas, el del cifrado césar. No sé vosotros pero almenos a mi en seguridad informática fue el algoritmo con el que nos enseñaron qué era el cifrado." />
<link rel="canonical" href="https://jorgonor.com/es/blog/2012/12/cifrado-cesar-php-vs-python-benchmark.html" />
<meta property="og:url" content="https://jorgonor.com/es/blog/2012/12/cifrado-cesar-php-vs-python-benchmark.html" />
<meta property="og:site_name" content="Jorgonor" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2012-12-25T19:26:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Cifrado César (PHP vs Python)" />
<meta name="twitter:site" content="@jorgonor" />
<meta name="twitter:creator" content="@jorgonor" />
<meta name="google-site-verification" content="F_iQ3vgdOe6rDYNG-NjoHfXirbNnHwytIs3AXYkvqAw" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"jorgonor"},"dateModified":"2016-03-28T13:00:00+00:00","datePublished":"2012-12-25T19:26:00+00:00","description":"Vuelvo con un pequeño problema al que le he estado dando vueltas, el del cifrado césar. No sé vosotros pero almenos a mi en seguridad informática fue el algoritmo con el que nos enseñaron qué era el cifrado.","headline":"Cifrado César (PHP vs Python)","mainEntityOfPage":{"@type":"WebPage","@id":"https://jorgonor.com/es/blog/2012/12/cifrado-cesar-php-vs-python-benchmark.html"},"url":"https://jorgonor.com/es/blog/2012/12/cifrado-cesar-php-vs-python-benchmark.html"}</script>
<!-- End Jekyll SEO tag -->


  

  <meta name="keywords" content="Python, PHP" >

  
  <meta name="content-language" content="es">
  

  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4HH511444Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4HH511444Z');
</script>

</head>

  <body class="post">
      
    

<div id="sidebar">
  <header>
    <div class="site-title">
      <a href="/es">
        
          <span class="back-arrow icon"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 0h24v24H0z" fill="none"/>
  <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
</svg></span>
        
        Jorgonor
      </a>
    </div>
    <p class="lead">Desarrollador de Software</p>
  </header>

  <nav id="sidebar-nav-links">
  
  <a class="page-link" href="/es/blog.html">Blog</a>
  
  <a class="page-link" href="/es/contacto.html">Contacto</a>
  
</nav>

  <nav id="sidebar-icon-links">
  <a class="icon" href="https://www.linkedin.com/in/jorgonor88" target="_blank" aria-label="Linkedin" alt="Linkedin">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0v24h24v-24h-24zm8 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.397-2.586 7-2.777 7 2.476v6.759z"/></svg>
  </a>
  <a id="github-link"
      class="icon" title="Follow @jorgonor on GitHub" aria-label="Follow @jorgonor on GitHub"
      href="https://github.com/jorgonor">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 28" height="24" width="28"><path d="M12 2c6.625 0 12 5.375 12 12 0 5.297-3.437 9.797-8.203 11.391-0.609 0.109-0.828-0.266-0.828-0.578 0-0.391 0.016-1.687 0.016-3.297 0-1.125-0.375-1.844-0.812-2.219 2.672-0.297 5.484-1.313 5.484-5.922 0-1.313-0.469-2.375-1.234-3.219 0.125-0.313 0.531-1.531-0.125-3.187-1-0.313-3.297 1.234-3.297 1.234-0.953-0.266-1.984-0.406-3-0.406s-2.047 0.141-3 0.406c0 0-2.297-1.547-3.297-1.234-0.656 1.656-0.25 2.875-0.125 3.187-0.766 0.844-1.234 1.906-1.234 3.219 0 4.594 2.797 5.625 5.469 5.922-0.344 0.313-0.656 0.844-0.766 1.609-0.688 0.313-2.438 0.844-3.484-1-0.656-1.141-1.844-1.234-1.844-1.234-1.172-0.016-0.078 0.734-0.078 0.734 0.781 0.359 1.328 1.75 1.328 1.75 0.703 2.141 4.047 1.422 4.047 1.422 0 1 0.016 1.937 0.016 2.234 0 0.313-0.219 0.688-0.828 0.578-4.766-1.594-8.203-6.094-8.203-11.391 0-6.625 5.375-12 12-12zM4.547 19.234c0.031-0.063-0.016-0.141-0.109-0.187-0.094-0.031-0.172-0.016-0.203 0.031-0.031 0.063 0.016 0.141 0.109 0.187 0.078 0.047 0.172 0.031 0.203-0.031zM5.031 19.766c0.063-0.047 0.047-0.156-0.031-0.25-0.078-0.078-0.187-0.109-0.25-0.047-0.063 0.047-0.047 0.156 0.031 0.25 0.078 0.078 0.187 0.109 0.25 0.047zM5.5 20.469c0.078-0.063 0.078-0.187 0-0.297-0.063-0.109-0.187-0.156-0.266-0.094-0.078 0.047-0.078 0.172 0 0.281s0.203 0.156 0.266 0.109zM6.156 21.125c0.063-0.063 0.031-0.203-0.063-0.297-0.109-0.109-0.25-0.125-0.313-0.047-0.078 0.063-0.047 0.203 0.063 0.297 0.109 0.109 0.25 0.125 0.313 0.047zM7.047 21.516c0.031-0.094-0.063-0.203-0.203-0.25-0.125-0.031-0.266 0.016-0.297 0.109s0.063 0.203 0.203 0.234c0.125 0.047 0.266 0 0.297-0.094zM8.031 21.594c0-0.109-0.125-0.187-0.266-0.172-0.141 0-0.25 0.078-0.25 0.172 0 0.109 0.109 0.187 0.266 0.172 0.141 0 0.25-0.078 0.25-0.172zM8.937 21.438c-0.016-0.094-0.141-0.156-0.281-0.141-0.141 0.031-0.234 0.125-0.219 0.234 0.016 0.094 0.141 0.156 0.281 0.125s0.234-0.125 0.219-0.219z"></path>
</svg>

  </a>
  
  <a id="x-link" class="icon" href="https://twitter.com/jorgonor" >
    <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 512 462.799" width="24" height="24">
<path fill-rule="nonzero" d="M403.229 0h78.506L310.219 196.04 512 462.799H354.002L230.261 301.007 88.669 462.799h-78.56l183.455-209.683L0 0h161.999l111.856 147.88L403.229 0zm-27.556 415.805h43.505L138.363 44.527h-46.68l283.99 371.278z"/>
</svg>
  </a>
  
  
  
  <a id="subscribe-link"
     class="icon" title="Subscribe" aria-label="Subscribe"
     href="https://jorgonor.com/es/feed.xml">
    <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <circle cx="6.18" cy="17.82" r="2.18"/>
    <path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/>
</svg>
  </a>
  <a id="stackoverflow-link" href="https://stackoverflow.com/users/6254934/jorgonor">
    <img src="https://stackoverflow.com/users/flair/6254934.png?theme=dark" width="208" height="58" alt="profile for jorgonor at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for jorgonor at Stack Overflow, Q&amp;A for professional and enthusiast programmers" />
  </a>
  
</nav>
  
<p class="lead-2">Experiencia</p>

<ul class="pages-list">
    <li class="exp-link"><a href="/es/programador/php.html" class="white-text">PHP</a></li>
</ul>


  <div id="footer-copy">
    © 2016-2024 <a href="https://jorgonor.com">jorgonor.com</a>
    Vila-real, Castellón - España
</div>
</div>

    <main class="container">
      <div id="cookies_notice" >
    <div class="col s8 m10">
        <span class="card-title">Cookies</span>
        <p>Esta web utiliza cookies para obtener datos estadísticos de la navegación de sus usuarios. Si continúas navegando consideramos que aceptas su uso.</p>
    </div>
    <div class="col s4 m2">
        <a id="cookies_notice_close" href="#">Aceptar</a>
    </div>
</div>

      <div class="content">
        <h1>Cifrado César (PHP vs Python)</h1>
        <header class="post-header">
          <p class="post-meta">Dec 25, 2012</p>
        </header>
        
        <div class="post-body">  
          <p>
    Vuelvo con un pequeño problema al que le he estado dando vueltas,
    el del cifrado césar. No sé vosotros pero almenos a mi en seguridad informática fue el primer problema que nos hicieron desarrollar,
    por lo que a mi ya me resultaba bastante familiar. Visto que es el problema del mes en 12meses12katas
    vamos a intentar hacer un benchmark para ver cual es el rendimiento en este problema resuelto en Python y en PHP.
</p>

<p>
    Pensé en como desarrollarlo, y se me ocurrió hacerlo con un histórico en plan git,
    realizando diferentes pequeñas mejoras y haciendo medidas de rendimiento sobre la solución,
    viendo como diferentes cambios podían afectar al rendimiento tanto en Python como en PHP.
    Este histórico de mejoras puede consultarse en el repositorio <a href="https://github.com/jorgonor/caesar">caesar</a>
    en el que publiqué la solución en mi cuenta de github.
</p>

<p>
    Bueno, vayamos al pequeño resumen que quería poner aquí del desarrollo.
    Al principio, pensé en realizar una solución directa, tanto en Python como en PHP.
    En ella, no se ha hecho uso de funciones ni otros mecanismos de abstracción.
    Está claro que eso hace que el código no sea tan fácil de seguir, pero para el fin con el que yo quería realizar este ejercicio me resultaba más interesante
    no meter estos mecanismos de por medio para la medición de rendimiento.
    Por otro lado, aprovechando que las implementaciones funcionan por entrada y salida estándar,
    las pruebas se pueden hacer para ambas implementaciones, utilizando un shell script que se puede encontrar en el repositorio de la solución.
</p>

<h4>Versión PHP</h4>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="n">error_die</span><span class="p">(</span><span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$STDERR</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="s1">'php://stderr'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">);</span>
    <span class="nb">fwrite</span><span class="p">(</span><span class="nv">$STDERR</span><span class="p">,</span> <span class="nv">$message</span><span class="p">);</span>
    <span class="nb">fwrite</span><span class="p">(</span><span class="nv">$STDERR</span><span class="p">,</span> <span class="kc">PHP_EOL</span><span class="p">);</span>
    <span class="nb">fclose</span><span class="p">(</span><span class="nv">$STDERR</span><span class="p">);</span>
    <span class="k">die</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">error_die</span><span class="p">(</span><span class="s1">'Usage: ./caesar.php N'</span><span class="p">);</span>
<span class="p">}</span>

<span class="nv">$N</span> <span class="o">=</span> <span class="nv">$argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_numeric</span><span class="p">(</span><span class="nv">$N</span><span class="p">))</span> <span class="p">{</span>
    <span class="nf">error_die</span><span class="p">(</span><span class="s2">"</span><span class="nv">$N</span><span class="s2"> should be numeric"</span><span class="p">);</span>
<span class="p">}</span>

<span class="nb">define</span><span class="p">(</span><span class="s1">'CHUNK_SIZE'</span><span class="p">,</span> <span class="mi">1024</span><span class="p">);</span>
<span class="nv">$N</span> <span class="o">=</span> <span class="nb">intval</span><span class="p">(</span><span class="nv">$N</span><span class="p">);</span>
<span class="nv">$low_bounds</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'z'</span><span class="p">);</span>
<span class="nv">$up_bounds</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'A'</span><span class="p">,</span> <span class="s1">'Z'</span><span class="p">);</span>
<span class="nv">$diff</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">'Z'</span><span class="p">)</span> <span class="o">-</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">'A'</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="nv">$ord_low_bounds</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s1">'a'</span><span class="p">),</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">'z'</span><span class="p">));</span>
<span class="nv">$ord_up_bounds</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s1">'A'</span><span class="p">),</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">'Z'</span><span class="p">));</span>
<span class="nv">$fp</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="s1">'php://stdin'</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">);</span>

<span class="k">while</span> <span class="p">(</span> <span class="nv">$input</span> <span class="o">=</span> <span class="nb">fread</span><span class="p">(</span><span class="nv">$fp</span><span class="p">,</span> <span class="no">CHUNK_SIZE</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">$buffer</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
    <span class="k">foreach</span><span class="p">(</span><span class="nb">str_split</span><span class="p">(</span><span class="nv">$input</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$c</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$ord_c</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$ord_c</span> <span class="o">&gt;=</span> <span class="nv">$ord_low_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span>
            <span class="nv">$ord_c</span> <span class="o">&lt;=</span> <span class="nv">$ord_low_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
            <span class="nv">$x</span> <span class="o">=</span> <span class="nv">$ord_c</span> <span class="o">+</span> <span class="nv">$N</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$x</span> <span class="o">&gt;</span> <span class="nv">$ord_low_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
                <span class="nv">$x</span> <span class="o">-=</span> <span class="nv">$diff</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nv">$x</span> <span class="o">&lt;</span> <span class="nv">$ord_low_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
                <span class="nv">$x</span> <span class="o">+=</span> <span class="nv">$diff</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nv">$c</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="nv">$x</span><span class="p">);</span>

        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$ord_c</span> <span class="o">&gt;=</span> <span class="nv">$ord_up_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span>
            <span class="nv">$ord_c</span> <span class="o">&lt;=</span> <span class="nv">$ord_up_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>

            <span class="nv">$x</span> <span class="o">=</span> <span class="nv">$ord_c</span> <span class="o">+</span> <span class="nv">$N</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$x</span> <span class="o">&gt;</span> <span class="nv">$ord_up_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
                <span class="nv">$x</span> <span class="o">-=</span> <span class="nv">$diff</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nv">$x</span> <span class="o">&lt;</span> <span class="nv">$ord_up_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
                <span class="nv">$x</span> <span class="o">+=</span> <span class="nv">$diff</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="nv">$c</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="nv">$x</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$buffer</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$c</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">echo</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="nv">$buffer</span><span class="p">);</span>
    <span class="p">}</span>

<span class="nb">fclose</span><span class="p">(</span><span class="nv">$fp</span><span class="p">);</span></code></pre></figure>
<p>Por otro lado, tenemos la solución en python. </p>

<h4>Versión Python</h4>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="n">sys</span>

<span class="k">def</span> <span class="nf">error_die</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="n">sys</span><span class="p">.</span><span class="n">stderr</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="n">sys</span><span class="p">.</span><span class="n">stderr</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">sys</span><span class="p">.</span><span class="nf">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>


<span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nf">error_die</span><span class="p">(</span><span class="sh">'</span><span class="s">Usage: ./caesar.php N</span><span class="sh">'</span><span class="p">)</span>

<span class="n">N</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">N</span><span class="p">.</span><span class="nf">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="p">(</span><span class="n">N</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="sh">'</span><span class="s">-</span><span class="sh">'</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">N</span><span class="p">[</span><span class="mi">1</span><span class="p">:].</span><span class="nf">isdigit</span><span class="p">())</span> <span class="p">:</span>
    <span class="nf">error_die</span><span class="p">(</span><span class="sh">"</span><span class="s">{} should be numeric</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">N</span><span class="p">))</span>

<span class="n">CHUNK_SIZE</span> <span class="o">=</span> <span class="mi">1024</span>
<span class="n">N</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

<span class="n">low_bounds</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">z</span><span class="sh">'</span><span class="p">]</span>
<span class="n">up_bounds</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">A</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Z</span><span class="sh">'</span><span class="p">]</span>
<span class="n">diff</span> <span class="o">=</span> <span class="nf">ord</span><span class="p">(</span><span class="sh">'</span><span class="s">Z</span><span class="sh">'</span><span class="p">)</span> <span class="o">-</span> <span class="nf">ord</span><span class="p">(</span><span class="sh">'</span><span class="s">A</span><span class="sh">'</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">ord_low_bounds</span> <span class="o">=</span> <span class="p">[</span><span class="nf">ord</span><span class="p">(</span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span><span class="p">),</span> <span class="nf">ord</span><span class="p">(</span><span class="sh">'</span><span class="s">z</span><span class="sh">'</span><span class="p">)]</span>
<span class="n">ord_up_bounds</span> <span class="o">=</span> <span class="p">[</span><span class="nf">ord</span><span class="p">(</span><span class="sh">'</span><span class="s">A</span><span class="sh">'</span><span class="p">),</span> <span class="nf">ord</span><span class="p">(</span><span class="sh">'</span><span class="s">Z</span><span class="sh">'</span><span class="p">)]</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="nb">input</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">stdin</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="n">CHUNK_SIZE</span><span class="p">)</span>
    <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="nb">buffer</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">input</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">c</span> <span class="o">&gt;=</span> <span class="n">low_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">low_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="nf">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="n">N</span>
            <span class="k">if</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="n">ord_low_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">c</span> <span class="o">-=</span> <span class="n">diff</span>
            <span class="k">if</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">ord_low_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">c</span> <span class="o">+=</span> <span class="n">diff</span>
            <span class="n">c</span> <span class="o">=</span> <span class="nf">chr</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">c</span> <span class="o">&gt;=</span> <span class="n">up_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">up_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="nf">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="n">N</span>
            <span class="k">if</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="n">ord_up_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">c</span> <span class="o">-=</span> <span class="n">diff</span>
            <span class="k">if</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">ord_up_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">c</span> <span class="o">+=</span> <span class="n">diff</span>

            <span class="n">c</span> <span class="o">=</span> <span class="nf">chr</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

        <span class="nb">buffer</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
    <span class="n">sys</span><span class="p">.</span><span class="n">stdout</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">""</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="nb">buffer</span><span class="p">))</span></code></pre></figure>

<p>
    Como podeis ver, las diferencias son mínimas.
    La diferencia más curiosa es la que en PHP se está comparando a los caracteres fronteras como enteros y en Python como strings.
    Aún sigo preguntándome el porqué, pero demostrado por las pruebas de rendimiento, que en Python la solución es más rápida comparando caracteres como strings que como su equivalente numérico y en PHP
    lo hace más rápido con comparaciones numéricas.
</p>
<p>
    Bueno, en cuanto a resultados, PHP como siempre me decepciona demasiado.
    Dejando claro las versiones de Python y PHP que estamos usando (Python 2.7.3 y PHP 5.4.9),
    podemos ver una tabla de tiempos tomada con time ante una entrada que ronda los 10MB.
</p>

<table>
    <tr>
        <th>PHP</th>
        <th>Python</th>
    </tr>
    <tr>
        <td>real  0m41.481s<br/>user  0m41.391s<br/>sys  0m0.056s </td>
        <td>real  0m14.330s<br/>user  0m14.301s<br/>sys  0m0.040s </td>
    </tr>
</table>

<p>
    Evidentemente, los tiempos varían dependiendo de la ejecución.
    No tomé medias ni medianas, pero la verdad es que pensé que no valía la pena, dada que la diferencia
    es de 3 órdenes de magnitud y que estos benchmarks tampoco es que sean una verdad absoluta,
    por lo que perder precisión tampoco me resulta demasiado desconcertante.
</p>

<p>
    En mi opinión, PHP muy mal. Como prácticamente en cualquier comparación que se haga de un problema, la solución en Python siempre suele ser más eficiente.
    No sé si el motivo viene relacionado con las estructuras de datos, o bien con que simplemente el intérprete es más eficiente.
</p>

<p>
    Bueno, volviendo al problema, es evidente que estamos haciendo más cálculos de los necesarios.
    Podemos cachear estos resultados con un diccionario/hash/array o como queramos llamarle dependiendo de nuestro lenguaje (hash me parece la nomenclatura más acertada).
    Esto acelerará en mucho el problema, ya que tomar el dato del diccionario será más rápido que calcularlo de nuevo.
</p>

<h4>Versión PHP</h4>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="n">error_die</span><span class="p">(</span><span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$STDERR</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="s1">'php://stderr'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">);</span>
    <span class="nb">fwrite</span><span class="p">(</span><span class="nv">$STDERR</span><span class="p">,</span> <span class="nv">$message</span><span class="p">);</span>
    <span class="nb">fwrite</span><span class="p">(</span><span class="nv">$STDERR</span><span class="p">,</span> <span class="kc">PHP_EOL</span><span class="p">);</span>
    <span class="nb">fclose</span><span class="p">(</span><span class="nv">$STDERR</span><span class="p">);</span>
    <span class="k">die</span><span class="p">();</span>
<span class="p">}</span>


<span class="k">if</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">error_die</span><span class="p">(</span><span class="s1">'Usage: ./caesar.php N'</span><span class="p">);</span>
<span class="p">}</span>

<span class="nv">$N</span> <span class="o">=</span> <span class="nv">$argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_numeric</span><span class="p">(</span><span class="nv">$N</span><span class="p">))</span> <span class="p">{</span>
    <span class="nf">error_die</span><span class="p">(</span><span class="s2">"</span><span class="nv">$N</span><span class="s2"> should be numeric"</span><span class="p">);</span>
<span class="p">}</span>

<span class="nb">define</span><span class="p">(</span><span class="s1">'CHUNK_SIZE'</span><span class="p">,</span> <span class="mi">1024</span><span class="p">);</span>

<span class="nv">$N</span> <span class="o">=</span> <span class="nb">intval</span><span class="p">(</span><span class="nv">$N</span><span class="p">);</span>

<span class="nv">$low_bounds</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'z'</span><span class="p">);</span>
<span class="nv">$up_bounds</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'A'</span><span class="p">,</span> <span class="s1">'Z'</span><span class="p">);</span>
<span class="nv">$diff</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">'Z'</span><span class="p">)</span> <span class="o">-</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">'A'</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="nv">$ord_low_bounds</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s1">'a'</span><span class="p">),</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">'z'</span><span class="p">));</span>
<span class="nv">$ord_up_bounds</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s1">'A'</span><span class="p">),</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">'Z'</span><span class="p">));</span>

<span class="nv">$cache</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$fp</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="s1">'php://stdin'</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">);</span>
<span class="k">while</span> <span class="p">(</span> <span class="nv">$input</span> <span class="o">=</span> <span class="nb">fread</span><span class="p">(</span><span class="nv">$fp</span><span class="p">,</span> <span class="no">CHUNK_SIZE</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">$buffer</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
    <span class="k">foreach</span><span class="p">(</span><span class="nb">str_split</span><span class="p">(</span><span class="nv">$input</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$c</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$r</span> <span class="o">=</span> <span class="o">@</span><span class="nv">$cache</span><span class="p">[</span><span class="nv">$c</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$r</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$r</span> <span class="o">=</span> <span class="nv">$c</span><span class="p">;</span>
            <span class="nv">$ord_c</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$ord_c</span> <span class="o">&gt;=</span> <span class="nv">$ord_low_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="o">&amp;&amp;</span> <span class="nv">$ord_c</span> <span class="o">&lt;=</span> <span class="nv">$ord_low_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="p">{</span>
                <span class="nv">$x</span> <span class="o">=</span> <span class="nv">$ord_c</span> <span class="o">+</span> <span class="nv">$N</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$x</span> <span class="o">&gt;</span> <span class="nv">$ord_low_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
                    <span class="nv">$x</span> <span class="o">-=</span> <span class="nv">$diff</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$x</span> <span class="o">&lt;</span> <span class="nv">$ord_low_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
                    <span class="nv">$x</span> <span class="o">+=</span> <span class="nv">$diff</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nv">$r</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="nv">$x</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nv">$ord_c</span> <span class="o">&gt;=</span> <span class="nv">$ord_up_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="o">&amp;&amp;</span> <span class="nv">$ord_c</span> <span class="o">&lt;=</span> <span class="nv">$ord_up_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
                <span class="nv">$x</span> <span class="o">=</span> <span class="nv">$ord_c</span> <span class="o">+</span> <span class="nv">$N</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$x</span> <span class="o">&gt;</span> <span class="nv">$ord_up_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
                    <span class="nv">$x</span> <span class="o">-=</span> <span class="nv">$diff</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$x</span> <span class="o">&lt;</span> <span class="nv">$ord_up_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
                    <span class="nv">$x</span> <span class="o">+=</span> <span class="nv">$diff</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="nv">$r</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="nv">$x</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nv">$cache</span><span class="p">[</span><span class="nv">$c</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$r</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nv">$buffer</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$r</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">echo</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="nv">$buffer</span><span class="p">);</span>
<span class="p">}</span>

<span class="nb">fclose</span><span class="p">(</span><span class="nv">$fp</span><span class="p">);</span></code></pre></figure>
<p>
    Antes de pasar a la versión Python, me gustaría comentar el "uso" del operador @ para evitar el error_reporting del notice debido al no estar comprobando la existencia en el array de la clave con la que accedemos al array <i>$cache</i>.
    Si no estoy mal informado, esto es más eficiente que el tener q comprobar la existencia, por lo que ya que estamos intentando ser lo más rápidos posible, seamos lo suficientemente sucios :)
</p>

<h4>Versión Python</h4>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="n">sys</span>

<span class="k">def</span> <span class="nf">error_die</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="n">sys</span><span class="p">.</span><span class="n">stderr</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="n">sys</span><span class="p">.</span><span class="n">stderr</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">sys</span><span class="p">.</span><span class="nf">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>


<span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nf">error_die</span><span class="p">(</span><span class="sh">'</span><span class="s">Usage: ./caesar.php N</span><span class="sh">'</span><span class="p">)</span>

<span class="n">N</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">N</span><span class="p">.</span><span class="nf">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="p">(</span><span class="n">N</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="sh">'</span><span class="s">-</span><span class="sh">'</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">N</span><span class="p">[</span><span class="mi">1</span><span class="p">:].</span><span class="nf">isdigit</span><span class="p">())</span> <span class="p">:</span>
    <span class="nf">error_die</span><span class="p">(</span><span class="sh">"</span><span class="s">{} should be numeric</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">N</span><span class="p">))</span>

<span class="n">CHUNK_SIZE</span> <span class="o">=</span> <span class="mi">1024</span>
<span class="n">N</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

<span class="n">cache</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">low_bounds</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">z</span><span class="sh">'</span><span class="p">]</span>
<span class="n">up_bounds</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">A</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Z</span><span class="sh">'</span><span class="p">]</span>
<span class="n">diff</span> <span class="o">=</span> <span class="nf">ord</span><span class="p">(</span><span class="sh">'</span><span class="s">Z</span><span class="sh">'</span><span class="p">)</span> <span class="o">-</span> <span class="nf">ord</span><span class="p">(</span><span class="sh">'</span><span class="s">A</span><span class="sh">'</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">ord_low_bounds</span> <span class="o">=</span> <span class="p">[</span><span class="nf">ord</span><span class="p">(</span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span><span class="p">),</span> <span class="nf">ord</span><span class="p">(</span><span class="sh">'</span><span class="s">z</span><span class="sh">'</span><span class="p">)]</span>
<span class="n">ord_up_bounds</span> <span class="o">=</span> <span class="p">[</span><span class="nf">ord</span><span class="p">(</span><span class="sh">'</span><span class="s">A</span><span class="sh">'</span><span class="p">),</span> <span class="nf">ord</span><span class="p">(</span><span class="sh">'</span><span class="s">Z</span><span class="sh">'</span><span class="p">)]</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="nb">input</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">stdin</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="n">CHUNK_SIZE</span><span class="p">)</span>
    <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="nb">buffer</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">input</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">cache</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">c</span>
            <span class="k">if</span> <span class="n">c</span> <span class="o">&gt;=</span> <span class="n">low_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">low_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="nf">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="n">N</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">ord_low_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">x</span> <span class="o">-=</span> <span class="n">diff</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">ord_low_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">x</span> <span class="o">+=</span> <span class="n">diff</span>
                <span class="n">r</span> <span class="o">=</span> <span class="nf">chr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">c</span> <span class="o">&gt;=</span> <span class="n">up_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">up_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="nf">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="n">N</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">ord_up_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">x</span> <span class="o">-=</span> <span class="n">diff</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">ord_up_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">x</span> <span class="o">+=</span> <span class="n">diff</span>

                <span class="n">r</span> <span class="o">=</span> <span class="nf">chr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">cache</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span>

        <span class="nb">buffer</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
    <span class="n">sys</span><span class="p">.</span><span class="n">stdout</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">""</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="nb">buffer</span><span class="p">))</span></code></pre></figure>
<p>Y esta sería la tabla con los tiempos. </p>

<table>
    <tr>
        <td>PHP </td>
        <td>Python </td>
    </tr>
    <tr>
        <td>real 0m11.322s<br/>user 0m11.289s<br/>sys 0m0.040s </td>
        <td>real 0m6.001s<br/>user 0m5.984s<br/>sys 0m0.032s </td>
    </tr>
</table>

<p>
    Volvemos a ver una  gran diferencia entre intérpretes.
    Aunque PHP ha mejorado 4 veces su tiempo, Python sigue siendo más rápido que PHP,
    aunque ahora del orden de 2 veces y no de 3, por lo que con una solución mejor pensada la diferencia no se hace tan notable.
</p>

<h4>Conclusiones</h4>

<p>
    Mi opinión es que en el intérprete de PHP hay trabajo por hacer.
    Cada vez se lo ponen más difícil sus competidores Python y Ruby,
    lenguajes mucho más expresivos y mucho más elegantes sintácticamente.
    PHP no tiene ventaja alguna si almenos no muestra mejores prestaciones.
    Hay opiniones que comentan que el desarrollo en PHP es más rápido, que rindes más.
    En mi opinión nada más lejos de la realidad.
    Tienes que hacer más "keystrokes" por culpa de su sintaxis enrevesada, sus comportamientos suelen ser muy inconsitentes y, si no es más rápido que el resto, ¿qué motivo hay para usarlo?
</p>

<p>
    También es cierto, que al estar usando PHP desde CLI, no estoy del todo seguro si se puede sacar alguna mejora de APC.
    Creo que este módulo es específico de apache para mantener el opcode de los ficheros PHP para no tener que reinterpretarlos en cada petición.
    En CLI no tiene demasiado sentido, ambos lenguajes compiten igual interpretando su código.
    Pero es cierto, que en un entorno Web puede que PHP funcionara mejor.
    Mi desconocimiento en herramientas para otros lenguajes como APC me hace darle aún esa posibilidad a PHP, pero si existen alternativas similares para Python, a PHP la única posibilidad que le queda es desaparecer del mapa.
</p>

<h4>Implementación en C</h4>

<p>
    Dándole otra vuelta de tuerca, también he desarrollado una versión del algoritmo de cifrado en C.
    Esta versión se encuentra en el repositorio y, para mí, no tiene perdida.
    Hacía mucho tiempo que no tocaba C, así que si tiene algún fallo gordo, no dudéis en comentarlo.
    Acabo con la tabla de tiempos de la versión con cache de resultados en los tres lenguajes para observar la gran diferencia de rendimiento que ofrece bajar al nivel de C.
</p>

<table>
    <tr>
        <th>C</th>
        <th>Python</th>
        <th>PHP</th>
    </tr>
    <tr>
        <td>real 0m0.106s<br/>user 0m0.104s<br/>sys 0m0.008s </td>
        <td>real 0m6.073s<br/>user 0m6.044s<br/>sys 0m0.044s </td>
        <td>real 0m11.322s<br/>user 0m11.289s<br/>sys 0m0.040s </td>
    </tr>
</table>

<p>
    C se muestra del orden de 60 veces más rápido que Python y del orden de casi 120 veces más rápido que PHP.
    Y eso compilando sin usar opción alguna de optimización. Asombroso.
</p>

          



<div class="post-tags">
  
    <span>
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">Python</span>
    </span>
  
    <span>
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">PHP</span>
    </span>
  
</div>
        </div>

        <div id="disqus_thread"></div>
        <script>
            var canonicalUrl = document.location.toString(); 
            var disqus_config = function () {
                this.page.url = canonicalUrl;
                this.page.identifier = "";
            };
            (function() {  // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');
                
                s.src = '//jorgonorcom.disqus.com/embed.js';
                
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>

        <section class="related"></section>
      </div>
    </main>
    <script type="text/javascript" src="/app/app.js"></script>

  </body>
</html>
