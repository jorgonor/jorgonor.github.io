<!DOCTYPE html>
<html lang="es">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

  
  <link rel="stylesheet" href="/css/main.css" media="screen,projection" />
  

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon.png" />
<link rel="shortcut icon" href="/favicon.ico" />
  
  
  <link rel="alternate" type="application/rss+xml" title="Jorgonor" href="https://jorgonor.com/es/feed.xml" />
  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Evitar error reporting en producción en CodeIgniter | Jorgonor</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Evitar error reporting en producción en CodeIgniter" />
<meta name="author" content="jorgonor" />
<meta property="og:locale" content="es" />
<meta name="description" content="Bueno, como ya sabéis esto es un blog de desarrollo web. Hasta el momento casi siempre hemos estado mirando CakePHP, pero últimamente le estoy dando al CodeIgniter y me he encontrado con una receta interesante para los rigurosos." />
<meta property="og:description" content="Bueno, como ya sabéis esto es un blog de desarrollo web. Hasta el momento casi siempre hemos estado mirando CakePHP, pero últimamente le estoy dando al CodeIgniter y me he encontrado con una receta interesante para los rigurosos." />
<link rel="canonical" href="https://jorgonor.com/es/blog/web/2013/07/evitar-error-reporting-produccion-code-igniter.html" />
<meta property="og:url" content="https://jorgonor.com/es/blog/web/2013/07/evitar-error-reporting-produccion-code-igniter.html" />
<meta property="og:site_name" content="Jorgonor" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2013-07-09T20:50:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Evitar error reporting en producción en CodeIgniter" />
<meta name="twitter:site" content="@jorgonor" />
<meta name="twitter:creator" content="@jorgonor" />
<meta name="google-site-verification" content="F_iQ3vgdOe6rDYNG-NjoHfXirbNnHwytIs3AXYkvqAw" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"jorgonor"},"dateModified":"2016-03-28T13:00:00+00:00","datePublished":"2013-07-09T20:50:00+00:00","description":"Bueno, como ya sabéis esto es un blog de desarrollo web. Hasta el momento casi siempre hemos estado mirando CakePHP, pero últimamente le estoy dando al CodeIgniter y me he encontrado con una receta interesante para los rigurosos.","headline":"Evitar error reporting en producción en CodeIgniter","mainEntityOfPage":{"@type":"WebPage","@id":"https://jorgonor.com/es/blog/web/2013/07/evitar-error-reporting-produccion-code-igniter.html"},"url":"https://jorgonor.com/es/blog/web/2013/07/evitar-error-reporting-produccion-code-igniter.html"}</script>
<!-- End Jekyll SEO tag -->


  

  <meta name="keywords" content="Apache, CodeIgniter, Framework" >

  
  <meta name="content-language" content="es">
  

  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4HH511444Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4HH511444Z');
</script>

</head>

  <body class="post">
      
    

<div id="sidebar">
  <header>
    <div class="site-title">
      <a href="/es">
        
          <span class="back-arrow icon"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 0h24v24H0z" fill="none"/>
  <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
</svg></span>
        
        Jorgonor
      </a>
    </div>
    <p class="lead">Desarrollador de Software</p>
  </header>

  <nav id="sidebar-nav-links">
  
  <a class="page-link" href="/es/blog.html">Blog</a>
  
  <a class="page-link" href="/es/contacto.html">Contacto</a>
  
</nav>

  <nav id="sidebar-icon-links">
  <a class="icon" href="https://www.linkedin.com/in/jorgonor88" target="_blank" aria-label="Linkedin" alt="Linkedin" title="Linkedin">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0v24h24v-24h-24zm8 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.397-2.586 7-2.777 7 2.476v6.759z"/></svg>
  </a>
  <a id="github-link"
      class="icon" title="Seguir @jorgonor" aria-label="Seguir @jorgonor"
      alt="Seguir @jorgonor" href="https://github.com/jorgonor">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 28" height="24" width="28"><path d="M12 2c6.625 0 12 5.375 12 12 0 5.297-3.437 9.797-8.203 11.391-0.609 0.109-0.828-0.266-0.828-0.578 0-0.391 0.016-1.687 0.016-3.297 0-1.125-0.375-1.844-0.812-2.219 2.672-0.297 5.484-1.313 5.484-5.922 0-1.313-0.469-2.375-1.234-3.219 0.125-0.313 0.531-1.531-0.125-3.187-1-0.313-3.297 1.234-3.297 1.234-0.953-0.266-1.984-0.406-3-0.406s-2.047 0.141-3 0.406c0 0-2.297-1.547-3.297-1.234-0.656 1.656-0.25 2.875-0.125 3.187-0.766 0.844-1.234 1.906-1.234 3.219 0 4.594 2.797 5.625 5.469 5.922-0.344 0.313-0.656 0.844-0.766 1.609-0.688 0.313-2.438 0.844-3.484-1-0.656-1.141-1.844-1.234-1.844-1.234-1.172-0.016-0.078 0.734-0.078 0.734 0.781 0.359 1.328 1.75 1.328 1.75 0.703 2.141 4.047 1.422 4.047 1.422 0 1 0.016 1.937 0.016 2.234 0 0.313-0.219 0.688-0.828 0.578-4.766-1.594-8.203-6.094-8.203-11.391 0-6.625 5.375-12 12-12zM4.547 19.234c0.031-0.063-0.016-0.141-0.109-0.187-0.094-0.031-0.172-0.016-0.203 0.031-0.031 0.063 0.016 0.141 0.109 0.187 0.078 0.047 0.172 0.031 0.203-0.031zM5.031 19.766c0.063-0.047 0.047-0.156-0.031-0.25-0.078-0.078-0.187-0.109-0.25-0.047-0.063 0.047-0.047 0.156 0.031 0.25 0.078 0.078 0.187 0.109 0.25 0.047zM5.5 20.469c0.078-0.063 0.078-0.187 0-0.297-0.063-0.109-0.187-0.156-0.266-0.094-0.078 0.047-0.078 0.172 0 0.281s0.203 0.156 0.266 0.109zM6.156 21.125c0.063-0.063 0.031-0.203-0.063-0.297-0.109-0.109-0.25-0.125-0.313-0.047-0.078 0.063-0.047 0.203 0.063 0.297 0.109 0.109 0.25 0.125 0.313 0.047zM7.047 21.516c0.031-0.094-0.063-0.203-0.203-0.25-0.125-0.031-0.266 0.016-0.297 0.109s0.063 0.203 0.203 0.234c0.125 0.047 0.266 0 0.297-0.094zM8.031 21.594c0-0.109-0.125-0.187-0.266-0.172-0.141 0-0.25 0.078-0.25 0.172 0 0.109 0.109 0.187 0.266 0.172 0.141 0 0.25-0.078 0.25-0.172zM8.937 21.438c-0.016-0.094-0.141-0.156-0.281-0.141-0.141 0.031-0.234 0.125-0.219 0.234 0.016 0.094 0.141 0.156 0.281 0.125s0.234-0.125 0.219-0.219z"></path>
</svg>

  </a>
  
  <a id="x-link" class="icon" xº href="https://twitter.com/jorgonor" aria-label="X" alt="X" title="X">
    <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 512 462.799" width="24" height="24">
<path fill-rule="nonzero" d="M403.229 0h78.506L310.219 196.04 512 462.799H354.002L230.261 301.007 88.669 462.799h-78.56l183.455-209.683L0 0h161.999l111.856 147.88L403.229 0zm-27.556 415.805h43.505L138.363 44.527h-46.68l283.99 371.278z"/>
</svg>
  </a>
  
  
  
  <a id="subscribe-link"
     class="icon" title="Subscribirse" aria-label="Subscribirse"
     href="https://jorgonor.com/es/feed.xml">
    <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <circle cx="6.18" cy="17.82" r="2.18"/>
    <path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/>
</svg>
  </a>
  <a id="stackoverflow-link" href="https://stackoverflow.com/users/6254934/jorgonor">
    <img src="https://stackoverflow.com/users/flair/6254934.png?theme=dark" width="208" height="58" alt="profile for jorgonor at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for jorgonor at Stack Overflow, Q&amp;A for professional and enthusiast programmers" />
  </a>
  
</nav>
  
<p class="lead-2">Experiencia</p>

<ul class="pages-list">
    <li class="exp-link"><a href="/es/programador/php.html" class="white-text">PHP</a></li>
</ul>


  <div id="footer-copy">
    © 2016-2024 <a href="https://jorgonor.com">jorgonor.com</a>
    Vila-real, Castellón - España
</div>
</div>

    <main class="container">
      <div id="cookies_notice" >
    <div class="col s8 m10">
        <span class="card-title">Cookies</span>
        <p>Esta web utiliza cookies para obtener datos estadísticos de la navegación de sus usuarios. Si continúas navegando consideramos que aceptas su uso.</p>
    </div>
    <div class="col s4 m2">
        <a id="cookies_notice_close" href="#">Aceptar</a>
    </div>
</div>

      <div class="content">
        <h1>Evitar error reporting en producción en CodeIgniter</h1>
        <header class="post-header">
          
          <p class="post-meta">
            9/Jul/2013
            </p>
        </header>
        
        <div class="post-body">  
          <p>
    Bueno, como sabéis esto es un blog de desarrollo web.
    Hasta el momento casi siempre hemos estado mirando <a href="http://cakephp.org" target="_blank">CakePHP</a>,
    pero últimamente le estoy dando un poco al <a href="http://ellislab.com/codeigniter" target="_blank">CodeIgniter</a>,
    por lo que quiero aportar unas líneas al respecto de algún problemilla que me he encontrado con este framework y cómo resolverlo.
</p>

<p>
    La primera sorpresa es ver que cuando te descargas el framework en el <b>front controller</b> (index.php) te encuentras con este regalazo:
</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="mf">...</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">defined</span><span class="p">(</span><span class="s1">'ENVIRONMENT'</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">switch</span> <span class="p">(</span><span class="no">ENVIRONMENT</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="s1">'development'</span><span class="o">:</span>
            <span class="nb">error_reporting</span><span class="p">(</span><span class="kc">E_ALL</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="s1">'testing'</span><span class="o">:</span>
        <span class="k">case</span> <span class="s1">'production'</span><span class="o">:</span>
            <span class="nb">error_reporting</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="k">exit</span><span class="p">(</span><span class="s1">'The application environment is not set correctly.'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="mf">...</span>   </code></pre></figure>

<p>
    Para mi manera de verlo, o CodeIgniter asume que eres muy profesional y nunca metes la pata en producción o simplemente comete un error al deshabilitar el error reporting en producción.
    ¿Quién no ha ido nunca al log de apache a buscar un error que le está dando en producción?
</p>
<p>
    Recordemos que no es lo mismo poner <a href="http://php.net/manual/en/function.error-reporting.php" target="_blank">error_reporting</a> a <b>0</b>,
    que indicar en la directiva <a href="http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors" target="_blank">display_errors</a>
    <b>on</b> o <b>off</b>.
    Con la llamada <b>error_reporting(0);</b> los errores automáticamente no se loguean.
</p>

<p>
    Bueno, si tenemos la configuración del php.ini con <b>display_errors = 'off';</b>,
    podemos simplemente cambiar el error reporting a E_ALL.
    ¡Ojo! No lo hagáis sin saber de un fichero que CodeIgniter nos guarda en su interior en la ruta
    <a href="https://github.com/bcit-ci/CodeIgniter/blob/2.2-stable/application/errors/error_php.php" target="_blank">application/errors/error_php.php</a>
</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"border:1px solid #990000;padding-left:20px;margin:0 0 10px 0;"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h4&gt;</span>A PHP Error was encountered<span class="nt">&lt;/h4&gt;</span>
    <span class="nt">&lt;p&gt;</span>Severity: <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$severity</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Message:  <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$message</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Filename: <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$filepath</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Line Number: <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$line</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>
    Este fichero, siempre y cuando se produzca un error que entre dentro del <b>error_reporting</b> especificado, va a sacar por pantalla un "bonito" recuadro explicando el error y dando una referencia a la línea del fichero PHP donde se ha producido.
    Esto para mi no es aceptable en una web en producción, pero tampoco es aceptable renunciar a tener el log de errores para salvarnos de más de un apuro.
</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="no">ENVIRONMENT</span> <span class="o">==</span> <span class="s1">'development'</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"border:1px solid #990000;padding-left:20px;margin:0 0 10px 0;"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h4&gt;</span>A PHP Error was encountered<span class="nt">&lt;/h4&gt;</span>
    <span class="nt">&lt;p&gt;</span>Severity: <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$severity</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Message:  <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$message</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Filename: <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$filepath</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Line Number: <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$line</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span></code></pre></figure>
<p>
    ¿Solución? Irnos al fichero <i>error_php.php</i> y poner un if para habilitarlo solo en los entornos que consideremos oportunos.
    Así, ese error no aparecerá en producción y seguiremos pudiendo encontrar indeseables bugs en producción gracias al log del servidor Web.
</p>

<p>
    Espero que sea de ayuda, ya que no he sido capaz de encontrar ningún recurso al respecto en google.
</p>

          



<div class="post-tags">
  
    <span>
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">Apache</span>
    </span>
  
    <span>
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">CodeIgniter</span>
    </span>
  
    <span>
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">Framework</span>
    </span>
  
</div>
        </div>

        <div id="disqus_thread"></div>
        <script>
            var canonicalUrl = document.location.toString(); 
            var disqus_config = function () {
                this.page.url = canonicalUrl;
                this.page.identifier = "";
            };
            (function() {  // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');
                
                s.src = '//jorgonorcom.disqus.com/embed.js';
                
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>

        <section class="related"></section>
      </div>
    </main>
    <script type="text/javascript" src="/app/app.js"></script>

  </body>
</html>
